# üõ† –ü–ª–∞–Ω –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã MediaWiki

## 1. –í—ã—Ö–æ–¥ –∏–∑ —Å—Ç—Ä–æ—è –æ–¥–Ω–æ–≥–æ –∏–∑ —Å–µ—Ä–≤–µ—Ä–æ–≤ MediaWiki

- –ë–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫ NGINX –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–∫–ª—é—á–∞–µ—Ç –Ω–µ–¥–æ—Å—Ç—É–ø–Ω—ã–π —Å–µ—Ä–≤–µ—Ä –∏–∑ –ø—É–ª–∞.
- –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∞—é—Ç —Ä–∞–±–æ—Ç—É —á–µ—Ä–µ–∑ –≤—Ç–æ—Ä–æ–π —ç–∫–∑–µ–º–ø–ª—è—Ä.
- –ü—Ä–∏ –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ—Å—Ç–∏ –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –Ω–æ–≤–∞—è –í–ú —Å —Ç–µ–º –∂–µ –∫–æ–Ω—Ñ–∏–≥–æ–º (–∏–∑ —à–∞–±–ª–æ–Ω–∞ –∏–ª–∏ –≤—Ä—É—á–Ω—É—é).
- –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –º–æ–∂–Ω–æ –ø—Ä–æ–≤–µ—Å—Ç–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞–∫—Ç—É–∞–ª—å–Ω–æ–≥–æ `LocalSettings.php` –∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ–º –∫ –¥–µ–π—Å—Ç–≤—É—é—â–µ–π –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö PostgreSQL.

## 2. –û—Ç–∫–∞–∑ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (PostgreSQL Master)

- –†–µ–ø–ª–∏–∫–∞ –±–µ—Ä—ë—Ç –Ω–∞ —Å–µ–±—è —Ä–æ–ª—å –º–∞—Å—Ç–µ—Ä–∞.
- –î–ª—è —ç—Ç–æ–≥–æ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–∞ –Ω–∞ —Ä–µ–ø–ª–∏–∫–µ:
  ```bash
  pg_ctl promote
  ```
- –°–µ—Ä–≤–µ—Ä—ã MediaWiki –≤—Ä–µ–º–µ–Ω–Ω–æ –ø–µ—Ä–µ–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞—é—Ç—Å—è –Ω–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ –Ω–æ–≤–æ–º—É –º–∞—Å—Ç–µ—Ä—É (–æ–±–Ω–æ–≤–ª—è–µ—Ç—Å—è DSN –≤ `LocalSettings.php`).

## 3. –ü–æ—Ç–µ—Ä—è —Ñ–∞–π–ª–æ–≤ MediaWiki (–≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)

- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤–æ–π —Å–∏—Å—Ç–µ–º—ã –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏:
  ```bash
  tar -xvzf /backup/wiki_fs_YYYY-MM-DD.tar.gz -C /var/www/mediawiki
  ```
- –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ –∏ –≤–ª–∞–¥–µ–ª–µ—Ü –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è:
  ```bash
  chown -R www-data:www-data /var/www/mediawiki
  chmod -R 755 /var/www/mediawiki
  ```

## 4. –ü–æ—Ç–µ—Ä—è –∏–ª–∏ —É–¥–∞–ª–µ–Ω–∏–µ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

- –í—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ SQL-–¥–∞–º–ø–∞ –∏–∑ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏:
  ```bash
  createdb -O wikiuser my_wiki
  psql -U wikiuser my_wiki < /backup/wiki_db_YYYY-MM-DD.sql
  ```
- –ü–æ—Å–ª–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –¥–æ—Å—Ç—É–ø –∏–∑ MediaWiki —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å.

## 5. –û—Ç–∫–∞–∑ —Å–µ—Ä–≤–µ—Ä–∞ Zabbix

- –í—Ä–µ–º–µ–Ω–Ω–æ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è —Ä—É—á–Ω–æ–π –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —á–µ—Ä–µ–∑ `curl`, `ping`, `systemctl status`.
- –ü–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞ Zabbix –≤–æ–∑–º–æ–∂–Ω–∞ —á–µ—Ä–µ–∑ ansible-—Ä–æ–ª—å –∏–ª–∏ –≤—Ä—É—á–Ω—É—é –ø–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏.
- –ö–æ–Ω—Ñ–∏–≥–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏ –∏ –≤–æ—Å—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—é—Ç—Å—è –∏–∑ tar-–∞—Ä—Ö–∏–≤–∞:
  ```bash
  tar -xvzf /backup/zabbix_configs.tar.gz -C /etc/zabbix
  ```

---

## üë• –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ –ª–∏—Ü–∞ –∏ —Ä–æ–ª–∏

| –ò–º—è —Å–æ—Ç—Ä—É–¥–Ω–∏–∫–∞     | –†–æ–ª—å –≤ –ø—Ä–æ–µ–∫—Ç–µ                          | –û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç—å                                                                 |
|--------------------|------------------------------------------|----------------------------------------------------------------------------------|
| **–ê–Ω–Ω–∞ –°–º–∏—Ä–Ω–æ–≤–∞**  | –°–∏—Å—Ç–µ–º–Ω—ã–π –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä                 | –ö–æ–Ω—Ç—Ä–æ–ª—å –∑–∞–ø—É—Å–∫–∞ –∏ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è MediaWiki-–∏–Ω—Å—Ç–∞–Ω—Å–æ–≤, –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤—â–∏–∫–∞ NGINX     |
| **–ò–≤–∞–Ω –ö–æ—Ä–Ω–∏–µ–Ω–∫–æ** | –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö (DBA)          | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∫–ª–∞—Å—Ç–µ—Ä–∞ PostgreSQL, —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–ø–ª–∏–∫–æ–π, –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –ë–î           |
| **–û–ª–µ–≥ –ü–µ—Ç—Ä–æ–≤**    | DevOps-–∏–Ω–∂–µ–Ω–µ—Ä                           | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ä–µ–∑–µ—Ä–≤–Ω–æ–≥–æ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è, –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç—ã/Ansible           |
| **–ú–∞—Ä–∏—è –ë–æ–Ω–¥–∞—Ä—å**  | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥-–∏–Ω–∂–µ–Ω–µ—Ä                       | –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞ Zabbix, —Ä–µ–∞–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–∞ –∏–Ω—Ü–∏–¥–µ–Ω—Ç—ã                         |
| **–°–≤–µ—Ç–ª–∞–Ω–∞ –Æ—Ä—å–µ–≤–∞**| –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—å –ø—Ä–æ–µ–∫—Ç–∞ (Team Lead)         | –ü—Ä–∏–Ω—è—Ç–∏–µ —Ä–µ—à–µ–Ω–∏–π –ø–æ –ø–ª–∞–Ω—É –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏—è, –∫–æ–æ—Ä–¥–∏–Ω–∞—Ü–∏—è –¥–µ–π—Å—Ç–≤–∏–π –≤—Å–µ—Ö —É—á–∞—Å—Ç–Ω–∏–∫–æ–≤   |

---

## üìå –ü—Ä–∏–º–µ—á–∞–Ω–∏—è

- –í—Å–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –æ—Ç–¥–µ–ª—å–Ω–æ–π –í–ú `/backup`.
- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–µ–ª–æ—Å—Ç–Ω–æ—Å—Ç–∏ –∞—Ä—Ö–∏–≤–æ–≤ –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –ø–æ cron —Ä–∞–∑ –≤ —Å—É—Ç–∫–∏.
- –í—Å–µ —à–∞–≥–∏ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω—ã –≤—Ä—É—á–Ω—É—é –∏/–∏–ª–∏ –≤ –ø—Ä–µ–∑–µ–Ω—Ç–∞—Ü–∏–∏.